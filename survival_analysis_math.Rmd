---
title: "survival analysis: math"
output: html_document
date: "2025-08-18"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## hazard function & survival function

hazard 함수와 survival 함수 관계를 확률 밀도 함수(PDF)와 누적분포 함수(CDF)의 기본 정의에서 유도해 보겠습니다.

------------------------------------------------------------------------

1.  $$T$$를 사건 발생 시간(연속형 확률변수)이라 하겠습니다.

2.  생존 함수(Survival function)는 사건이 시점 $$t$$까지 발생하지 않을 확률입니다. $$
    S(t) = P(T > t) = 1 - F(t)
    $$ 여기서 $$F(t)$$는 누적분포함수(CDF)로 사건이 $$t$$ 이전에 발생할 확률입니다.

3.  확률밀도함수(PDF)는 $$F(t)$$의 미분입니다. $$
    f(t) = \frac{d}{dt} F(t)
    $$

4.  hazard 함수 $$h(t)$$는 시점 $$t$$까지 사건이 발생하지 않은 상태에서, 바로 다음 아주 짧은 시간 간격 $$\Delta t$$ 내에 사건이 발생할 조건부 확률을 $$\Delta t$$로 나눈 값으로 정의됩니다. $$
    h(t) = \lim_{\Delta t \to 0} \frac{P(t \leq T  t) = \frac{d}{dt} (1 - F(t)) = -f(t)
    $$

5.  5번 식의 $$f(t) = h(t) S(t)$$를 위 미분식에 대입하면, $$
    \frac{d}{dt} S(t) = - h(t) S(t)
    $$

6.  양변을 $$S(t)$$로 나누면, $$
    \frac{1}{S(t)} \frac{d}{dt} S(t) = - h(t)
    $$

7.  좌변은 $$S(t)$$의 로그 미분 형태이므로, $$
    \frac{d}{dt} \log S(t) = - h(t)
    $$

8.  양변을 적분하면, $$
    \log S(t) = - \int_0^t h(u) du + C
    $$

9.  $$t=0$$일 때 생존 확률은 1이므로, $$S(0) = 1$$에서 $$C=0$$임을 알 수 있습니다. 따라서, $$
    S(t) = \exp\left(- \int_0^t h(u) du \right)
    $$

------------------------------------------------------------------------

결과적으로, hazard 함수 $$h(t)$$를 시간에 따라 적분한 누적위험함수의 음수를 지수 함수에 넣으면 생존함수 $$S(t)$$가 되며, 이는 기본적인 확률밀도함수와 누적분포함수 정의에서 자연스럽게 나오는 관계입니다. 이 과정은 survival analysis의 가장 핵심적인 수학적 기초입니다.
